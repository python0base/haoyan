import{d as S,K as M,q as V,o as t,a as k,e as m,w as s,O as D,b0 as I,j as i,l as g,g as R,X as P,_ as $,r as j}from"./index.dde30430.js";import{q}from"./el-button.6cccd9ff.js";import{E as A,a as L}from"./el-form-item.dfe844cc.js";import{E as T,a as K,b as W,c as X}from"./el-overlay.09a946b0.js";import{E as z}from"./el-checkbox.39b67b5b.js";import{E as O,a as Q,u as G}from"./format.0d0fe063.js";import"./el-tooltip.f67f1705.js";const H={class:"search"},J={class:"btns"},Y=S({__name:"page-search",props:{searchConfig:null},emits:["queryClick","resetClick"],setup(n,{emit:d}){var b;const c=n,r={};for(const h of c.searchConfig.formItems)r[h.prop]=(b=h.initialValue)!=null?b:"";const l=M(r),o=V();function C(){var h;(h=o.value)==null||h.resetFields(),d("resetClick")}function y(){d("queryClick",l)}return(h,N)=>{var F;const w=z,u=T,p=O,_=Q,v=A,E=K,x=W,B=L,U=q;return t(),k("div",H,[m(B,{model:l,ref_key:"formRef",ref:o,"label-width":(F=n.searchConfig.labelWidth)!=null?F:"80px",size:"large"},{default:s(()=>[m(x,{gutter:20},{default:s(()=>[(t(!0),k(D,null,I(n.searchConfig.formItems,a=>(t(),i(E,{key:a.prop,span:8},{default:s(()=>[m(v,{label:a.label,prop:a.prop},{default:s(()=>[a.type==="input"?(t(),i(w,{key:0,modelValue:l[a.prop],"onUpdate:modelValue":e=>l[a.prop]=e,placeholder:a.placeholder},null,8,["modelValue","onUpdate:modelValue","placeholder"])):g("",!0),a.type==="date-picker"?(t(),i(u,{key:1,modelValue:l[a.prop],"onUpdate:modelValue":e=>l[a.prop]=e,type:"daterange","range-separator":"-","start-placeholder":"\u5F00\u59CB\u65F6\u95F4","end-placeholder":"\u7ED3\u675F\u65F6\u95F4"},null,8,["modelValue","onUpdate:modelValue"])):g("",!0),a.type==="select"?(t(),i(_,{key:2,modelValue:l[a.prop],"onUpdate:modelValue":e=>l[a.prop]=e,placeholder:a.placeholder,style:{width:"100%"}},{default:s(()=>[(t(!0),k(D,null,I(a.options,e=>(t(),i(p,{key:e.value,label:e.label,value:e.value},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","placeholder"])):g("",!0)]),_:2},1032,["label","prop"])]),_:2},1024))),128))]),_:1})]),_:1},8,["model","label-width"]),R("div",J,[m(U,{icon:"Refresh",onClick:C},{default:s(()=>[P("\u91CD\u7F6E")]),_:1}),m(U,{icon:"Search",type:"primary",onClick:y},{default:s(()=>[P("\u67E5\u8BE2")]),_:1})])])}}});const de=$(Y,[["__scopeId","data-v-1921dbc7"]]),Z={class:"modal"},ee={class:"form"},le={class:"dialog-footer"},oe=S({__name:"page-modal",props:{modalConfig:null,otherInfo:null},setup(n,{expose:d}){var w;const c=n,r=V(!1),l={};for(const u of c.modalConfig.formItems)l[u.prop]=(w=u.initialValue)!=null?w:"";const o=M(l),C=V(!0),y=V(),b=G();function h(u=!0,p){if(r.value=!0,C.value=u,!u&&p){for(const _ in o)o[_]=p[_];y.value=p}else{for(const _ in o){const v=c.modalConfig.formItems.find(E=>E.prop===_);o[_]=v?v.initialValue:""}y.value=null}}function N(){r.value=!1;let u=o;c.otherInfo&&(u={...u,...c.otherInfo}),!C.value&&y.value?b.editPageDataAction(c.modalConfig.pageName,y.value.id,u):b.newPageDataAction(c.modalConfig.pageName,u)}return d({setModalVisible:h}),(u,p)=>{const _=z,v=T,E=O,x=Q,B=A,U=L,F=q,a=X;return t(),k("div",Z,[m(a,{modelValue:r.value,"onUpdate:modelValue":p[1]||(p[1]=e=>r.value=e),title:C.value?n.modalConfig.header.newTitle:n.modalConfig.header.editTitle,width:"30%",center:""},{footer:s(()=>[R("span",le,[m(F,{onClick:p[0]||(p[0]=e=>r.value=!1)},{default:s(()=>[P("\u53D6\u6D88")]),_:1}),m(F,{type:"primary",onClick:N},{default:s(()=>[P(" \u786E\u5B9A ")]),_:1})])]),default:s(()=>[R("div",ee,[m(U,{model:o,"label-width":"80px",size:"large"},{default:s(()=>[(t(!0),k(D,null,I(n.modalConfig.formItems,e=>(t(),i(B,{key:e.prop,label:e.label,prop:e.prop},{default:s(()=>[e.type==="input"?(t(),i(_,{key:0,modelValue:o[e.prop],"onUpdate:modelValue":f=>o[e.prop]=f,placeholder:e.placeholder},null,8,["modelValue","onUpdate:modelValue","placeholder"])):g("",!0),e.type==="date-picker"?(t(),i(v,{key:1,modelValue:o[e.prop],"onUpdate:modelValue":f=>o[e.prop]=f,type:"daterange","range-separator":"-","start-placeholder":"\u5F00\u59CB\u65F6\u95F4","end-placeholder":"\u7ED3\u675F\u65F6\u95F4"},null,8,["modelValue","onUpdate:modelValue"])):g("",!0),e.type==="select"?(t(),i(x,{key:2,modelValue:o[e.prop],"onUpdate:modelValue":f=>o[e.prop]=f,placeholder:e.placeholder,style:{width:"100%"}},{default:s(()=>[(t(!0),k(D,null,I(e.options,f=>(t(),i(E,{key:f.value,label:f.label,value:f.value},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","placeholder"])):g("",!0),e.type==="custom"?j(u.$slots,e.slotName,{key:3},void 0,!0):g("",!0)]),_:2},1032,["label","prop"]))),128))]),_:3},8,["model"])])]),_:3},8,["modelValue","title"])])}}});const pe=$(oe,[["__scopeId","data-v-a63c8711"]]);function ie(){const n=V();function d(r){var l;(l=n.value)==null||l.fetchPageListData(r)}function c(){var r;(r=n.value)==null||r.fetchPageListData()}return{contentRef:n,handleQueryClick:d,handleResetClick:c}}function _e(n){const d=V();function c(){var l;(l=d.value)==null||l.setModalVisible()}function r(l){var o;(o=d.value)==null||o.setModalVisible(!1,l),n&&n(l)}return{modalRef:d,handleNewClick:c,handleEditClick:r}}export{de as P,_e as a,pe as b,ie as u};
